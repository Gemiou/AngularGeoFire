<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="AngularGeoFire : Angular service wrapping the GeoFire geospatial lib for Firebase" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>AngularGeoFire</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mikepugh/AngularGeoFire">View on GitHub</a>

          <h1 id="project_title">AngularGeoFire</h1>
          <h2 id="project_tagline">Angular service wrapping the GeoFire geospatial lib for Firebase</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mikepugh/AngularGeoFire/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mikepugh/AngularGeoFire/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="angulargeofire" class="anchor" href="#angulargeofire"><span class="octicon octicon-link"></span></a>AngularGeoFire</h1>

<p>Angular service wrapping the <a href="https://www.firebase.com/blog/2013-09-25-location-queries-geofire.html">GeoFire</a> geospatial lib for <a href="https://www.firebase.com/">Firebase</a>.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<pre><code>bower install angularGeoFire
</code></pre>

<p>In your app, include the Firebase and GeoFire libraries (technically AngularGeoFire doesn't depend on AngularFire but you'll probably want to use it). GeoFire stores data redundantly so you'll want to keep the objects you store with it (via $insertByLocWithId method) down to a minimum, preferrably just the id and then you'd use AngularFire to perform a look-up of the object's data using the id queried with GeoFire.</p>

<pre><code>&lt;script src="//cdn.firebase.com/v0/firebase.js"&gt;&lt;/script&gt;
&lt;script src="bower_components/angularfire/angularfire.js"&gt;&lt;/script&gt;
&lt;script src="bower_components/geoFire/geoFire.js"&gt;&lt;/script&gt;
&lt;script src="bower_components/AngularGeoFire/dist/angularGeoFire.js"&gt;&lt;/script&gt;
</code></pre>

<p>Include angularGeoFire.min.js and then include it in your app dependency. The API matches that of geoFire @ <a href="https://github.com/firebase/geoFire">https://github.com/firebase/geoFire</a>, just prefix the method calls with a $ (ex: $geoFire.$getPointsNearLoc). AngularGeoFire returns promises vs geoFire's passing of callbacks, with the exception of the $onPointsNearXX and $offPointsNearXX methods which accept a broadcast name and will broadcast the data from geoFire using the broadcast name passed in.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'angularGeoFire'</span><span class="p">]);</span>
</pre></div>

<p>Then you can reference the dependency in your services or controllers</p>

<div class="highlight highlight-javascript"><pre>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'SomeCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$geofire</span><span class="p">,</span> <span class="nx">$log</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">myPoints</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="kd">var</span> <span class="nx">geo</span> <span class="o">=</span> <span class="nx">$geofire</span><span class="p">(</span><span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="s1">'https://&lt;&lt;your-firebase&gt;&gt;.firebaseio.com/'</span><span class="p">));</span>
    <span class="kd">var</span> <span class="nx">someObj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s2">"some-key"</span><span class="p">,</span> <span class="nx">make</span><span class="o">:</span> <span class="s2">"Tesla"</span> <span class="p">};</span>
    <span class="c1">// Trivial example of inserting some data and querying data</span>
    <span class="nx">geo</span><span class="p">.</span><span class="nx">$insertByLocWithId</span><span class="p">([</span><span class="mf">37.771393</span><span class="p">,</span><span class="o">-</span><span class="mf">122.447104</span><span class="p">],</span> <span class="nx">someObj</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">someObj</span><span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$log</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">});</span>
    <span class="c1">// Query for data</span>
    <span class="nx">geo</span><span class="p">.</span><span class="nx">$getPointsNearLoc</span><span class="p">([</span><span class="mf">37.771393</span><span class="p">,</span><span class="o">-</span><span class="mf">122.447104</span><span class="p">],</span><span class="mi">5</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">myPoints</span> <span class="o">=</span> <span class="nx">array</span><span class="p">;</span>
          <span class="p">});</span>
  <span class="p">});</span>

</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>MIT</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">AngularGeoFire maintained by <a href="https://github.com/mikepugh">mikepugh</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
